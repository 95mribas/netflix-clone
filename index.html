<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV - Netflix Style</title>
    <style>
        :root {
            --primary: #e50914;
            --bg: #141414;
            --bg-light: #1f1f1f;
            --text: #fff;
            --text-secondary: #aaa;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        
        /* Login */
        #loginScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.9)), url('https://image.tmdb.org/t/p/original/p1F51Lvj3sMopG948F5HsBbl43C.jpg');
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .login-box {
            background: rgba(0,0,0,0.85);
            padding: 50px;
            border-radius: 8px;
            width: 100%;
            max-width: 400px;
        }
        
        .login-title {
            color: var(--primary);
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            font-family: 'Arial Black', sans-serif;
        }
        
        .login-form input {
            width: 100%;
            padding: 16px;
            margin-bottom: 20px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 16px;
        }
        
        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 15px 4%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, transparent 100%);
            z-index: 100;
            transition: background 0.3s;
        }
        
        header.scrolled {
            background: #000;
        }
        
        .logo {
            color: var(--primary);
            font-size: 28px;
            font-weight: bold;
            text-decoration: none;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-menu {
            position: relative;
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 4px;
            background: #333;
            cursor: pointer;
        }
        
        .dropdown {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            background: rgba(0,0,0,0.9);
            border-radius: 4px;
            min-width: 150px;
        }
        
        .dropdown.show {
            display: block;
        }
        
        .dropdown-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .dropdown-item:hover {
            background: #333;
        }
        
        /* Main */
        #app {
            display: none;
            padding-top: 80px;
        }
        
        /* Hero */
        .hero {
            height: 60vh;
            background: linear-gradient(to top, var(--bg), transparent), url('https://image.tmdb.org/t/p/original/p1F51Lvj3sMopG948F5HsBbl43C.jpg');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            padding: 0 4%;
        }
        
        .hero-content {
            max-width: 500px;
        }
        
        .hero-title {
            font-size: 42px;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .hero-description {
            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        /* Section */
        .section {
            padding: 20px 0;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            padding: 0 4%;
        }
        
        /* Channel Cards */
        .channels-scroll {
            display: flex;
            overflow-x: auto;
            padding: 10px 4%;
            gap: 15px;
        }
        
        .channels-scroll::-webkit-scrollbar {
            display: none;
        }
        
        .channel-card {
            min-width: 200px;
            background: var(--bg-light);
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .channel-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .channel-thumb {
            width: 100%;
            height: 120px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            position: relative;
        }
        
        .channel-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .channel-info {
            padding: 12px;
        }
        
        .channel-name {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .channel-category {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .live-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: red;
            color: white;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }
        
        /* Categories */
        .categories {
            display: flex;
            gap: 10px;
            padding: 15px 4%;
            overflow-x: auto;
        }
        
        .category {
            padding: 8px 16px;
            background: var(--bg-light);
            border: none;
            border-radius: 20px;
            color: var(--text);
            cursor: pointer;
            white-space: nowrap;
            font-size: 14px;
        }
        
        .category.active {
            background: var(--primary);
        }
        
        /* Player Modal */
        #playerModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 200;
        }
        
        #playerModal.show {
            display: block;
        }
        
        .player-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .player-header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.5);
        }
        
        .close-player {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .video-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        video {
            width: 100%;
            height: 100%;
            max-height: 80vh;
        }
        
        .player-controls {
            padding: 15px;
            background: rgba(0,0,0,0.5);
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .player-controls input {
            flex: 1;
            min-width: 200px;
            padding: 10px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: white;
        }
        
        .player-controls button {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
            padding: 20px 4%;
        }
        
        .admin-panel.show {
            display: block;
        }
        
        .admin-card {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .admin-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .admin-input {
            width: 100%;
            padding: 12px;
            background: #000;
            border: 1px solid #333;
            border-radius: 4px;
            color: white;
            margin-bottom: 10px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .status-active {
            background: green;
        }
        
        .status-inactive {
            background: red;
        }
        
        /* Footer */
        footer {
            padding: 40px 4%;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .hero-title { font-size: 28px; }
            .login-box { margin: 20px; padding: 30px; }
            .channel-card { min-width: 150px; }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen">
        <div class="login-box">
            <h1 class="login-title">IPTV</h1>
            <form class="login-form" id="loginForm">
                <input type="text" id="username" placeholder="Usu√°rio" required>
                <input type="password" id="password" placeholder="Senha" required>
                <button type="submit" class="login-btn">Entrar</button>
            </form>
            <p style="text-align: center; color: #666; font-size: 12px;">
                Admin: admin / admin123<br>
                Usu√°rio: user / user123
            </p>
        </div>
    </div>

    <!-- Main App -->
    <div id="app">
        <header id="header">
            <a href="#" class="logo">üì∫ IPTV</a>
            <div class="header-right">
                <div class="user-menu">
                    <div class="user-avatar" onclick="toggleDropdown()">üë§</div>
                    <div class="dropdown" id="dropdown">
                        <div class="dropdown-item" onclick="showAdmin()">‚öôÔ∏è Admin</div>
                        <div class="dropdown-item" onclick="logout()">üö™ Sair</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Hero -->
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">IPTV Premium</h1>
                <p class="hero-description">
                    Assista canais ao vivo, filmes e s√©ries em alta qualidade. 
                    Mais de 10.000 canais nacionais e internacionais.
                </p>
            </div>
        </section>

        <!-- Categories -->
        <div class="categories" id="categories">
            <button class="category active" onclick="filterCategory('all')">Todos</button>
        </div>

        <!-- Live TV Section -->
        <section class="section" id="liveSection">
            <h2 class="section-title">üì° Canais ao Vivo</h2>
            <div class="channels-scroll" id="liveChannels"></div>
        </section>

        <!-- Movies Section -->
        <section class="section" id="moviesSection">
            <h2 class="section-title">üé¨ Filmes</h2>
            <div class="channels-scroll" id="movieChannels"></div>
        </section>

        <!-- Series Section -->
        <section class="section" id="seriesSection">
            <h2 class="section-title">üì∫ S√©ries</h2>
            <div class="channels-scroll" id="seriesChannels"></div>
        </section>

        <!-- All Channels -->
        <section class="section" id="allSection">
            <h2 class="section-title">üìã Todos os Canais</h2>
            <div class="channels-scroll" id="allChannels"></div>
        </section>

        <!-- Admin Panel -->
        <div class="admin-panel" id="adminPanel">
            <h2 style="margin-bottom: 20px;">‚öôÔ∏è Painel Admin</h2>
            
            <div class="admin-card">
                <h3>üìä Status da Conex√£o</h3>
                <p>Status: <span class="status-badge status-active">Online</span></p>
                <p>Canais carregados: <span id="channelCount">0</span></p>
                <p>Lista atual: <span id="listName">M3U Principal</span></p>
            </div>
            
            <div class="admin-card">
                <h3>üîó Configurar Lista M3U</h3>
                <input type="text" class="admin-input" id="m3uUrl" placeholder="URL da lista M3U" value="http://syncorecdn.online/get.php?username=726268532&password=366657763&type=m3u_plus&output=mpegts">
                <button class="login-btn" onclick="updateM3U()">Atualizar Lista</button>
            </div>
            
            <div class="admin-card">
                <h3>üë• Gerenciar Usu√°rios</h3>
                <input type="text" class="admin-input" id="newUser" placeholder="Novo usu√°rio">
                <input type="password" class="admin-input" id="newPass" placeholder="Nova senha">
                <button class="login-btn" onclick="addUser()">Adicionar Usu√°rio</button>
            </div>
        </div>

        <footer>
            <p>¬© 2026 IPTV Premium - Todos os direitos reservados</p>
            <p style="margin-top: 10px;">Admin: admin / admin123 | Usu√°rio: user / user123</p>
        </footer>
    </div>

    <!-- Player Modal -->
    <div id="playerModal">
        <div class="player-container">
            <div class="player-header">
                <h3 id="playerTitle">Canal</h3>
                <button class="close-player" onclick="closePlayer()">‚úï</button>
            </div>
            <div class="video-wrapper">
                <video id="videoPlayer" controls>
                    <source src="" type="application/x-mpegURL">
                </video>
            </div>
            <div class="player-controls">
                <input type="text" id="channelUrl" placeholder="URL do canal">
                <button onclick="loadChannel()">Carregar</button>
                <button onclick="closePlayer()">Fechar</button>
            </div>
        </div>
    </div>

    <script>
        // Database
        const DB = {
            users: JSON.parse(localStorage.getItem('iptv_users')) || [
                { user: 'admin', pass: 'admin123', role: 'admin' },
                { user: 'user', pass: 'user123', role: 'user' }
            ],
            
            m3uUrl: localStorage.getItem('iptv_m3u') || 'http://syncorecdn.online/get.php?username=726268532&password=366657763&type=m3u_plus&output=mpegts',
            
            save() {
                localStorage.setItem('iptv_users', JSON.stringify(this.users));
                localStorage.setItem('iptv_m3u', this.m3uUrl);
            }
        };

        // Channels data
        let allChannels = [];
        let filteredChannels = [];

        // Login
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;
            
            const found = DB.users.find(u => u.user === user && u.pass === pass);
            
            if (found) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('app').style.display = 'block';
                loadChannels();
            } else {
                alert('Usu√°rio ou senha incorretos!');
            }
        });

        // Logout
        function logout() {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('app').style.display = 'none';
            closePlayer();
        }

        // Dropdown
        function toggleDropdown() {
            document.getElementById('dropdown').classList.toggle('show');
        }

        // Show Admin
        function showAdmin() {
            document.getElementById('adminPanel').classList.toggle('show');
            toggleDropdown();
        }

        // Update M3U
        function updateM3U() {
            const url = document.getElementById('m3uUrl').value;
            DB.m3uUrl = url;
            DB.save();
            alert('Lista atualizada! Carregando...');
            loadChannels();
        }

        // Add User
        function addUser() {
            const user = document.getElementById('newUser').value;
            const pass = document.getElementById('newPass').value;
            
            if (user && pass) {
                DB.users.push({ user, pass, role: 'user' });
                DB.save();
                alert('Usu√°rio adicionado!');
                document.getElementById('newUser').value = '';
                document.getElementById('newPass').value = '';
            }
        }

        // Parse M3U
        async function parseM3U(url) {
            try {
                const response = await fetch(url);
                const text = await response.text();
                
                const lines = text.split('\n');
                const channels = [];
                let channel = {};

                for (let line of lines) {
                    line = line.trim();
                    
                    if (line.startsWith('#EXTINF:')) {
                        const match = line.match(/#EXTINF:([^,]*),(.*)/);
                        if (match) {
                            channel = {
                                duration: match[1],
                                name: match[2].trim()
                            };
                            
                            const groupMatch = line.match(/group-title="([^"]*)"/);
                            if (groupMatch) channel.category = groupMatch[1];
                            
                            const logoMatch = line.match(/tvg-logo="([^"]*)"/);
                            if (logoMatch) channel.logo = logoMatch[1];
                        }
                    } else if (line && !line.startsWith('#')) {
                        channel.url = line;
                        if (channel.name && channel.url) {
                            channels.push(channel);
                        }
                        channel = {};
                    }
                }

                return channels;
            } catch (error) {
                console.error('Erro:', error);
                return [];
            }
        }

        // Load channels
        async function loadChannels() {
            allChannels = await parseM3U(DB.m3uUrl);
            filteredChannels = allChannels;
            
            document.getElementById('channelCount').textContent = allChannels.length;
            
            renderCategories();
            renderChannels();
        }

        // Render categories
        function renderCategories() {
            const categories = new Set();
            allChannels.forEach(ch => {
                if (ch.category) categories.add(ch.category);
            });

            const container = document.getElementById('categories');
            let html = '<button class="category active" onclick="filterCategory(\'all\')">Todos</button>';
            
            // Add default categories
            html += '<button class="category" onclick="filterCategory(\'TV\')">TV ao Vivo</button>';
            html += '<button class="category" onclick="filterCategory(\'Movies\')">Filmes</button>';
            html += '<button class="category" onclick="filterCategory(\'Series\')">S√©ries</button>';

            categories.forEach(cat => {
                html += `<button class="category" onclick="filterCategory('${cat}')">${cat}</button>`;
            });

            container.innerHTML = html;
        }

        // Filter category
        function filterCategory(category) {
            document.querySelectorAll('.category').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (category === 'all') {
                filteredChannels = allChannels;
            } else if (category === 'TV') {
                filteredChannels = allChannels.filter(ch => 
                    !ch.category || ch.category.includes('TV') || ch.category.includes('Aberta') || ch.category.includes('News')
                );
            } else if (category === 'Movies') {
                filteredChannels = allChannels.filter(ch => 
                    ch.category && (ch.category.includes('Movie') || ch.category.includes('Filme') || ch.category.includes('Cinema'))
                );
            } else if (category === 'Series') {
                filteredChannels = allChannels.filter(ch => 
                    ch.category && (ch.category.includes('Series') || ch.category.includes('S√©rie'))
                );
            } else {
                filteredChannels = allChannels.filter(ch => ch.category === category);
            }

            renderChannels();
        }

        // Render channels
        function renderChannels() {
            const live = allChannels.slice(0, 20);
            const movies = filteredChannels.filter(ch => ch.category && (ch.category.includes('Movie') || ch.category.includes('Filme')));
            const series = filteredChannels.filter(ch => ch.category && (ch.category.includes('Series') || ch.category.includes('S√©rie')));
            
            document.getElementById('liveChannels').innerHTML = live.map((ch, i) => createChannelCard(ch, i)).join('');
            document.getElementById('movieChannels').innerHTML = movies.slice(0, 15).map((ch, i) => createChannelCard(ch, i)).join('');
            document.getElementById('seriesChannels').innerHTML = series.slice(0, 15).map((ch, i) => createChannelCard(ch, i)).join('');
            document.getElementById('allChannels').innerHTML = filteredChannels.slice(0, 30).map((ch, i) => createChannelCard(ch, i)).join('');
        }

        function createChannelCard(ch, index) {
            const originalIndex = allChannels.indexOf(ch);
            return `
                <div class="channel-card" onclick="playChannel(${originalIndex})">
                    <div class="channel-thumb">
                        ${ch.logo ? `<img src="${ch.logo}" onerror="this.parentElement.innerHTML='üì∫'">` : 'üì∫'}
                        <span class="live-badge">AO VIVO</span>
                    </div>
                    <div class="channel-info">
                        <div class="channel-name">${ch.name}</div>
                        <div class="channel-category">${ch.category || 'TV'}</div>
                    </div>
                </div>
            `;
        }

        // Play channel
        function playChannel(index) {
            const channel = allChannels[index];
            document.getElementById('playerTitle').textContent = channel.name;
            document.getElementById('channelUrl').value = channel.url;
            document.getElementById('playerModal').classList.add('show');
            
            const player = document.getElementById('videoPlayer');
            player.src = channel.url;
            player.play();
        }

        // Load channel
        function loadChannel() {
            const url = document.getElementById('channelUrl').value;
            const player = document.getElementById('videoPlayer');
            player.src = url;
            player.play();
        }

        // Close player
        function closePlayer() {
            const player = document.getElementById('videoPlayer');
            player.pause();
            player.src = '';
            document.getElementById('playerModal').classList.remove('show');
        }

        // Header scroll
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.user-menu')) {
                document.getElementById('dropdown').classList.remove('show');
            }
        });
    </script>
</body>
</html>
