<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV - Assista Canais ao Vivo</title>
    <style>
        :root {
            --primary: #e50914;
            --bg: #141414;
            --bg-light: #1f1f1f;
            --text: #fff;
            --text-secondary: #aaa;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        
        /* Login */
        #loginScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.9)), url('https://image.tmdb.org/t/p/original/p1F51Lvj3sMopG948F5HsBbl43C.jpg');
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .login-box {
            background: rgba(0,0,0,0.85);
            padding: 50px;
            border-radius: 8px;
            width: 100%;
            max-width: 400px;
        }
        
        .login-title {
            color: var(--primary);
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-form input {
            width: 100%;
            padding: 16px;
            margin-bottom: 20px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 16px;
        }
        
        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 15px 4%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, transparent 100%);
            z-index: 100;
            transition: background 0.3s;
        }
        
        header.scrolled {
            background: #000;
        }
        
        .logo {
            color: var(--primary);
            font-size: 28px;
            font-weight: bold;
            text-decoration: none;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 4px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        /* Main */
        #app {
            display: none;
            padding-top: 80px;
        }
        
        /* Hero */
        .hero {
            height: 50vh;
            background: linear-gradient(to top, var(--bg), transparent), url('https://image.tmdb.org/t/p/original/p1F51Lvj3sMopG948F5HsBbl43C.jpg');
            background-size: cover;
            display: flex;
            align-items: center;
            padding: 0 4%;
        }
        
        .hero-content h1 {
            font-size: 42px;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .hero-content p {
            font-size: 16px;
            max-width: 400px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        /* Section */
        .section {
            padding: 20px 0;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            padding: 0 4%;
        }
        
        /* Channels */
        .channels-scroll {
            display: flex;
            overflow-x: auto;
            padding: 10px 4%;
            gap: 15px;
        }
        
        .channels-scroll::-webkit-scrollbar {
            display: none;
        }
        
        .channel-card {
            min-width: 180px;
            background: var(--bg-light);
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .channel-card:hover {
            transform: scale(1.05);
        }
        
        .channel-thumb {
            width: 100%;
            height: 100px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            position: relative;
        }
        
        .channel-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .live-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: red;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 9px;
            font-weight: bold;
        }
        
        .channel-info {
            padding: 10px;
        }
        
        .channel-name {
            font-weight: bold;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .channel-category {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 3px;
        }
        
        /* Categories */
        .categories {
            display: flex;
            gap: 10px;
            padding: 15px 4%;
            overflow-x: auto;
        }
        
        .category {
            padding: 8px 16px;
            background: var(--bg-light);
            border: none;
            border-radius: 20px;
            color: var(--text);
            cursor: pointer;
            white-space: nowrap;
            font-size: 14px;
        }
        
        .category.active {
            background: var(--primary);
        }
        
        /* Search */
        .search-box {
            padding: 15px 4%;
        }
        
        .search-box input {
            width: 100%;
            padding: 14px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: white;
            font-size: 15px;
        }
        
        /* Admin */
        .admin-panel {
            display: none;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .admin-panel.show {
            display: block;
        }
        
        .admin-card {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .admin-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .admin-input {
            width: 100%;
            padding: 12px;
            background: #000;
            border: 1px solid #333;
            border-radius: 4px;
            color: white;
            margin-bottom: 10px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .status-active { background: green; }
        .status-inactive { background: red; }
        
        /* Player */
        #playerModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 200;
        }
        
        #playerModal.show {
            display: flex;
            flex-direction: column;
        }
        
        .player-header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .close-player {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .video-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        video {
            width: 100%;
            height: 100%;
            max-height: 70vh;
        }
        
        .player-controls {
            padding: 15px;
            background: rgba(0,0,0,0.8);
        }
        
        .player-controls input {
            width: 100%;
            padding: 12px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: white;
            margin-bottom: 10px;
        }
        
        .player-controls button {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            margin-right: 10px;
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }
        
        /* Footer */
        footer {
            padding: 30px 4%;
            text-align: center;
            color: var(--text-secondary);
            font-size: 13px;
        }
        
        @media (max-width: 768px) {
            .hero-content h1 { font-size: 28px; }
            .login-box { margin: 20px; }
            .channel-card { min-width: 140px; }
        }
    </style>
</head>
<body>
    <!-- Login -->
    <div id="loginScreen">
        <div class="login-box">
            <h1 class="login-title">üì∫ IPTV</h1>
            <form class="login-form" id="loginForm">
                <input type="text" id="username" placeholder="Usu√°rio" required>
                <input type="password" id="password" placeholder="Senha" required>
                <button type="submit" class="login-btn">Entrar</button>
            </form>
            <p style="text-align: center; color: #666; font-size: 12px; margin-top: 15px;">
                Admin: admin / admin123
            </p>
        </div>
    </div>

    <!-- App -->
    <div id="app">
        <header id="header">
            <a href="#" class="logo">üì∫ IPTV</a>
            <div class="header-right">
                <div class="user-avatar" onclick="showAdmin()">‚öôÔ∏è</div>
            </div>
        </header>

        <div class="hero">
            <div class="hero-content">
                <h1>IPTV Premium</h1>
                <p>Assista canais ao vivo, filmes e s√©ries em alta qualidade.</p>
            </div>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Buscar canal..." oninput="searchChannels()">
        </div>

        <div class="categories" id="categories">
            <button class="category active" onclick="filterCategory('all')">Todos</button>
            <button class="category" onclick="filterCategory('TV')">TV ao Vivo</button>
            <button class="category" onclick="filterCategory('Movies')">Filmes</button>
            <button class="category" onclick="filterCategory('Series')">S√©ries</button>
        </div>

        <section class="section">
            <h2 class="section-title">üì° Canais ao Vivo</h2>
            <div class="channels-scroll" id="liveChannels">
                <div class="loading">Carregando canais...</div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">üé¨ Filmes</h2>
            <div class="channels-scroll" id="movieChannels"></div>
        </section>

        <section class="section">
            <h2 class="section-title">üì∫ S√©ries</h2>
            <div class="channels-scroll" id="seriesChannels"></div>
        </section>

        <section class="section">
            <h2 class="section-title">üìã Todos</h2>
            <div class="channels-scroll" id="allChannels"></div>
        </section>

        <!-- Admin -->
        <div class="admin-panel" id="adminPanel">
            <h2>‚öôÔ∏è Painel Admin</h2>
            
            <div class="admin-card">
                <h3>üìä Status</h3>
                <p>Status: <span class="status-badge status-active">Online</span></p>
                <p>Canais: <span id="channelCount">0</span></p>
            </div>
            
            <div class="admin-card">
                <h3>üîó Lista M3U</h3>
                <input type="text" class="admin-input" id="m3uUrl" placeholder="URL da lista M3U">
                <button class="login-btn" onclick="updateM3U()">Carregar Lista</button>
                <button class="login-btn" style="background: #333; margin-top: 10px;" onclick="loadDemoChannels()">Carregar Demo</button>
            </div>
        </div>

        <footer>
            <p>¬© 2026 IPTV Premium</p>
        </footer>
    </div>

    <!-- Player -->
    <div id="playerModal">
        <div class="player-header">
            <h3 id="playerTitle">Canal</h3>
            <button class="close-player" onclick="closePlayer()">‚úï</button>
        </div>
        <div class="video-wrapper">
            <video id="videoPlayer" controls></video>
        </div>
        <div class="player-controls">
            <input type="text" id="channelUrl" placeholder="URL do stream">
            <button onclick="loadChannel()">Carregar</button>
            <button onclick="closePlayer()">Fechar</button>
        </div>
    </div>

    <script>
        // Database
        const DB = {
            users: [
                { user: 'admin', pass: 'admin123', role: 'admin' }
            ],
            m3uUrl: 'http://syncorecdn.online/get.php?username=726268532&password=366657763&type=m3u_plus&output=mpegts'
        };

        let allChannels = [];

        // Login
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const u = document.getElementById('username').value;
            const p = document.getElementById('password').value;
            
            if (DB.users.find(x => x.user === u && x.pass === p)) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('app').style.display = 'block';
                loadChannels();
            } else {
                alert('Login incorreto!');
            }
        });

        // Load channels
        async function loadChannels() {
            document.getElementById('liveChannels').innerHTML = '<div class="loading">Carregando lista...</div>';
            document.getElementById('m3uUrl').value = DB.m3uUrl;
            
            try {
                // Try CORS proxy
                const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(DB.m3uUrl);
                const response = await fetch(proxyUrl);
                const text = await response.text();
                
                allChannels = parseM3U(text);
                
                if (allChannels.length === 0) {
                    // Try direct
                    const directResponse = await fetch(DB.m3uUrl);
                    const directText = await directResponse.text();
                    allChannels = parseM3U(directText);
                }
                
                document.getElementById('channelCount').textContent = allChannels.length;
                renderChannels();
                
            } catch (error) {
                console.error('Erro:', error);
                loadDemoChannels();
            }
        }

        // Parse M3U
        function parseM3U(text) {
            const lines = text.split('\n');
            const channels = [];
            let ch = {};

            for (let line of lines) {
                line = line.trim();
                
                if (line.startsWith('#EXTINF:')) {
                    const match = line.match(/#EXTINF:([^,]*),(.*)/);
                    if (match) {
                        ch = { name: match[2].trim() };
                        
                        const group = line.match(/group-title="([^"]*)"/);
                        if (group) ch.category = group[1];
                        
                        const logo = line.match(/tvg-logo="([^"]*)"/);
                        if (logo) ch.logo = logo[1];
                    }
                } else if (line && !line.startsWith('#') && line.startsWith('http')) {
                    ch.url = line;
                    if (ch.name) channels.push(ch);
                    ch = {};
                }
            }
            return channels;
        }

        // Demo channels
        function loadDemoChannels() {
            const demoData = [
                { name: "Globo HD", category: "TV Aberta", logo: "https://logodownload.org/globo-logo-0.png", url: "https://stream.hls01.hostingtvbrasil.com/live/8f6b778fos85yu/master.m3u8" },
                { name: "SBT", category: "TV Aberta", logo: "https://logodownload.org/sbt-logo-1.png", url: "https://stream.hls01.hostingtvbrasil.com/live/sbt/master.m3u8" },
                { name: "Record TV", category: "TV Aberta", logo: "https://logodownload.org/record-logo-0.png", url: "https://stream.hls01.hostingtvbrasil.com/live/record/master.m3u8" },
                { name: "Band", category: "TV Aberta", logo: "https://logodownload.org/band-logo-0.png", url: "https://stream.hls01.hostingtvbrasil.com/live/band/master.m3u8" },
                { name: "Netflix Demo", category: "Filmes", logo: "https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg", url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" },
                { name: "Cine HD", category: "Filmes", logo: "https://logodownload.org/wp-content/uploads/2022/04/netflix-logo-0.png", url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" },
                { name: "S√©rie Demo", category: "S√©ries", logo: "https://logodownload.org/hbo-logo-0.png", url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" },
                { name: "HBO HD", category: "S√©ries", logo: "https://logodownload.org/hbo-logo-0.png", url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4" },
                { name: "Esporte", category: "Esportes", logo: "https://logodownload.org/espn-logo-0.png", url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4" },
                { name: "Futebol Ao Vivo", category: "Esportes", logo: "https://logodownload.org/premier-league-logo-0.png", url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4" }
            ];
            
            allChannels = demoData;
            document.getElementById('channelCount').textContent = allChannels.length;
            renderChannels();
            alert('Demo carregado! Clique em um canal para assistir.');
        }

        // Render channels
        function renderChannels() {
            const live = allChannels.slice(0, 15);
            const movies = allChannels.filter(c => c.category && (c.category.includes('Movie') || c.category.includes('Filme'))).slice(0, 10);
            const series = allChannels.filter(c => c.category && (c.category.includes('Series') || c.category.includes('S√©rie'))).slice(0, 10);
            
            document.getElementById('liveChannels').innerHTML = live.map((c, i) => createCard(c, i)).join('');
            document.getElementById('movieChannels').innerHTML = movies.length ? movies.map((c, i) => createCard(c, i)).join('') : '<div class="loading">Nenhum filme encontrado</div>';
            document.getElementById('seriesChannels').innerHTML = series.length ? series.map((c, i) => createCard(c, i)).join('') : '<div class="loading">Nenhuma s√©rie encontrada</div>';
            document.getElementById('allChannels').innerHTML = allChannels.slice(0, 20).map((c, i) => createCard(c, i)).join('');
        }

        function createCard(ch, index) {
            return `
                <div class="channel-card" onclick="playChannel(${index})">
                    <div class="channel-thumb">
                        ${ch.logo ? `<img src="${ch.logo}" onerror="this.parentElement.innerHTML='üì∫'">` : 'üì∫'}
                        <span class="live-badge">AO VIVO</span>
                    </div>
                    <div class="channel-info">
                        <div class="channel-name">${ch.name}</div>
                        <div class="channel-category">${ch.category || 'TV'}</div>
                    </div>
                </div>
            `;
        }

        // Filter
        function filterCategory(cat) {
            document.querySelectorAll('.category').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            if (cat === 'all') {
                renderChannels();
            } else if (cat === 'TV') {
                const filtered = allChannels.filter(c => !c.category || c.category.includes('TV') || c.category.includes('Aberta'));
                document.getElementById('allChannels').innerHTML = filtered.slice(0, 20).map((c, i) => createCard(c, allChannels.indexOf(c))).join('');
            }
        }

        // Search
        function searchChannels() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query) {
                renderChannels();
                return;
            }
            
            const filtered = allChannels.filter(c => c.name.toLowerCase().includes(query));
            document.getElementById('allChannels').innerHTML = filtered.slice(0, 20).map((c, i) => createCard(c, allChannels.indexOf(c))).join('');
        }

        // Play
        function playChannel(index) {
            const ch = allChannels[index];
            document.getElementById('playerTitle').textContent = ch.name;
            document.getElementById('channelUrl').value = ch.url;
            document.getElementById('playerModal').classList.add('show');
            
            const player = document.getElementById('videoPlayer');
            player.src = ch.url;
            player.play();
        }

        function loadChannel() {
            const url = document.getElementById('channelUrl').value;
            const player = document.getElementById('videoPlayer');
            player.src = url;
            player.play();
        }

        function closePlayer() {
            const player = document.getElementById('videoPlayer');
            player.pause();
            player.src = '';
            document.getElementById('playerModal').classList.remove('show');
        }

        // Admin
        function showAdmin() {
            document.getElementById('adminPanel').classList.toggle('show');
        }

        function updateM3U() {
            DB.m3uUrl = document.getElementById('m3uUrl').value;
            loadChannels();
        }

        // Header scroll
        window.addEventListener('scroll', () => {
            document.getElementById('header').classList.toggle('scrolled', window.scrollY > 50);
        });
    </script>
</body>
</html>
